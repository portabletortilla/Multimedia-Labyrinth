<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/Page1.css">
    <title>testPage</title>
</head>

<body>
    <div class="MainScreen">

            <!-- Image Map Generated by http://www.image-map.net/ -->
        <img src="./graphics/pag_40.jpg" usemap="#imageMap" onclick="startBAudio()">
        <div class ="Secret" ><a href="./extras/extra1.html">?</a> </div>
        <div id="Dialogue" hidden>
            <h3></h3>
        </div>
    </div>

    <div class="overlay" id="overlay" onclick="endOverlay()">
        <div class="oImg" id="oImg"></div>
        <div class="subtitles" id ="subtitles">
            
        </div>
    </div>

    <!--Audio Files-->
    <audio preload="auto" autoplay loop id="BackGroundNoise">
        <source src="./audio/windybackground.wav" type="audio/wav">
        If you're reading this it means that there is an issue with the sound in this page.We're Sorry!

    </audio>

</body>


<map name="imageMap">
    <area  alt="door1" title="door1"  coords="342,544,65,0" shape="rect" onclick = 'door1F()'>
    <area  alt="door2" title="door2"  coords="519,528,793,2" shape="rect" onclick = 'WriteResponse("Stuck beyond repair i fear" , "door_interact")'>
    <area  alt="paper" title="paper"  coords="1003,213,1088,235,1114,107,1036,69" shape="poly" onclick = 'paperF()'>
    <area  alt="heater" title="heater" coords="942,332,1107,510" shape="rect" onclick='WriteResponse("I have one similar, not quite as broken though")'>
    <area  alt="door3" title="door3"  coords="1434,533,1161,3" shape="rect" onclick='beginOverlay("Weird symbols were half hazardly scribed on the wood.... \n Creepy...",
    "./graphics/Mist_door.jpg")'>
    <area  alt="door4" title="door4"  coords="1605,523,1886,8" shape="rect" onclick='WriteResponse("Dont really feel like opening that one now")' >
</map>

<script src="./scripts/GenericScript.js"></script>


<script>
    localStorage.setItem("key",0);
    localStorage.setItem("door1State",0);

    function paperF(){
        
        localStorage.setItem("key",1);

        //<br /> lets you get a new line.

        beginOverlay("A weird note hangs in the wall, desperately trying to fly of with the wind <br /> There seems to be something behing it...." , 
    "./graphics/Note.jpg" ,"paperA"," \" RUSTY KEY \" has been added to your Inventory");
    }
    function door1F(){
        if(localStorage.getItem("door1State")== 1){
            WriteResponse("Player enters room ... in the future","door_open")
            return;
        }

        if(localStorage.getItem("key")== 1){
            WriteResponse("The key turns with a satisfying click. <br /> It broke, but the door's open. ","door_unlock")
            localStorage.setItem("key",0);
            localStorage.setItem("door1State",1);
            return;
        }

        WriteResponse("Doesnt want to open might just be locked though ","door_interact");

    }
</script>

</html>